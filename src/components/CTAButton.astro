---
export interface Props {
  text: string;
  href: string;
  variant?: 'primary' | 'secondary' | 'ghost' | 'white';
  size?: 'small' | 'medium' | 'large';
  external?: boolean;
  trackingId?: string;
  className?: string;
  usePulse?: boolean;
  shimmer?: boolean; // New prop for the shimmer effect
}

const { 
  text, 
  href, 
  variant = 'primary',
  size = 'medium', 
  external = false,
  trackingId,
  className = '',
  usePulse = false,
  shimmer = false // Default shimmer to off
} = Astro.props;

const baseClasses = 'inline-block text-center rounded-lg cursor-pointer transition-all duration-300 ease-in-out';

const variantClasses = {
  primary: `
    font-bold text-white uppercase tracking-wider 
    bg-[linear-gradient(145deg,#ff7700,#ff5500)] 
    shadow-btn hover:shadow-btn-hover 
    hover:-translate-y-1 hover:scale-[1.03] active:translate-y-0
  `,
  secondary: `
    font-bold border-2 border-primary text-primary 
    hover:bg-primary hover:text-black
  `,
  ghost: 'font-medium text-text-primary hover:text-primary',
  white: 'font-bold bg-white hover:bg-gray-200 text-secondary'
};

const sizeClasses = {
  small: 'px-6 py-2 text-sm',
  medium: 'px-8 py-3 text-base',
  large: 'px-12 py-4 text-lg'
};

const pulseClass = usePulse ? 'animate-pulse' : '';
const shimmerClass = shimmer ? 'shimmer-effect' : ''; // Class to trigger the effect

const finalClasses = `${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${pulseClass} ${shimmerClass} ${className}`.trim();

const target = external ? '_blank' : '_self';
const rel = external ? 'noopener noreferrer' : '';
---

<a 
  href={href}
  class={finalClasses}
  target={target}
  rel={rel}
  data-tracking-id={trackingId}
>
  {text}
  {external && (
    <svg class="ml-2 inline-block h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
    </svg>
  )}
</a>

{/* This style block adds the shimmer effect, inspired by the reference files */}
<style>
  .shimmer-effect {
    position: relative;
    overflow: hidden;
    z-index: 1;
  }
  .shimmer-effect::after {
    content: '';
    position: absolute;
    top: 0;
    left: -150%;
    width: 75%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.25), transparent);
    transform: skewX(-25deg);
    transition: left 0.75s cubic-bezier(0.2, 0.8, 0.2, 1);
    z-index: 1;
  }
  .shimmer-effect:hover::after {
    left: 150%;
  }
</style>