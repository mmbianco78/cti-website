---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import MinimalArticleCard from '../../components/MinimalArticleCard.astro';
import PageHeadline from '../../components/PageHeadline.astro';

// Get all articles and sort by date
let articles = await getCollection('articles');
articles = articles.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout 
  title="Articles | Clay Target Instruction" 
  description="Expert insights on clay target shooting from world champions"
>
  {/* Simple Header */}
  <div class="border-b border-surface-anchor">
    <div class="max-w-5xl mx-auto px-6 py-16">
      <PageHeadline
        title="Articles"
        subtitle="Expert insights and proven techniques from world champion clay target instructors."
        centered={false}
      />
    </div>
  </div>

  {/* Articles List */}
  <div class="max-w-5xl mx-auto px-6 py-12">
    <div class="space-y-16">
      {articles.map((article, index) => (
        <>
          <MinimalArticleCard
            title={article.data.title}
            description={article.data.description}
            slug={article.slug}
            date={article.data.date}
            author={article.data.author}
            image={article.data.image}
          />
          {index < articles.length - 1 && (
            <hr class="border-surface-anchor" />
          )}
        </>
      ))}
    </div>
  </div>

  {/* Simple CTA */}
  <div class="border-t border-surface-anchor">
    <div class="max-w-5xl mx-auto px-6 py-20 text-center">
      <h2 class="text-3xl font-heading font-bold text-text-primary mb-6">
        Ready to improve your shooting?
      </h2>
      <p class="text-xl text-text-secondary mb-8 max-w-2xl mx-auto">
        Learn from world champions with our comprehensive online training platform.
      </p>
      <a 
        href="https://digital.claytargetinstruction.com" 
        class="inline-flex items-center gap-2 bg-primary text-bg px-8 py-4 rounded-lg font-bold text-lg hover:shadow-btn-hover transition-all"
      >
        Browse Training Courses
        <span>â†’</span>
      </a>
    </div>
  </div>
</BaseLayout>